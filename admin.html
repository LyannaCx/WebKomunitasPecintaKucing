<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Dashboard Admin PawPaw</title>
<style>
  /* General Styles */
body {
    background-color: #d7ebff;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0;
    padding: 20px 30px;
    color: #333;
}
  /* Header */
header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 10px;
}
header img {
    width: 180px;
    height: 40px;
}
header p {
    font-weight: 600;
    font-size: 20px;
    color: #8ec9ff;
    margin: 0;
}

  /* Section Container Styles */
section {
    background-color: #a8d1ff;
    border-radius: 10px;
    padding: 15px 25px 25px 25px;
    margin-bottom: 30px;
    box-sizing: border-box;
}
section h2 {
    font-weight: 700;
    color: #8bc6ff; /* slightly darker than bg */
    margin-top: 0;
    margin-bottom: 15px;
}

  /* Table Styling */
table {
    width: 100%;
    border-collapse: collapse;
    background-color: #c9e2ff;
    font-weight: 600;
}
table thead tr th, 
table tbody tr td {
    border: 1px solid #8bc6ff;
    padding: 8px 12px;
    text-align: left;
}
table thead tr th {
    background-color: #9ccfff;
}

tbody tr {
    font-weight: 500;
}

  /* Buttons */
button {
    font-weight: 600;
    font-size: 12px;
    padding: 5px 10px;
    border-radius: 5px;
    border: none;
    cursor: pointer;
    color: white;
    transition: background-color 0.3s ease;
}
button.hapus {
    background-color: #f44336;
}
button.hapus:hover {
    background-color: #d32f2f;
}
button.blokir {
    background-color: #ff5722;
}
button.blokir:hover {
    background-color: #e64a19;
}
button.upload {
    background-color: #7bb7f9;
    color: white;
    margin-top: 10px;
    width: 90px;
}
button.upload:hover {
    background-color: #5496f6;
}

  /* Input Fields */
input[type="text"], input[type="url"] {
    width: 100%;
    padding: 8px 10px;
    margin-top: 5px;
    margin-bottom: 5px;
    border: none;
    border-radius: 4px;
    box-sizing: border-box;
    font-weight: 600;
}
input::placeholder {
    font-weight: 400;
}
</style>
</head>
<body>

<header>
    <img src="PawPaw.png" alt="Paw logo" />
    <div>
        <p>Dashboard Admin</p>
    </div>
</header>

<!-- Manajemen Posting -->
<section id="manajemen-posting">
    <h2>Manajemen Posting</h2>
        <table>
            <thead>
                <tr>
                    <th>Judul postingan</th>
                    <th>Username</th>
                    <th>Aksi</th>
                </tr>
            </thead>
            <tbody id="posting-tbody">
                <tr>
                    <td>Kucing anggora bersantai</td>
                    <td>Peony21</td>
                    <td><button class="hapus" data-type="post" data-id="0">Hapus</button></td>
                </tr>
                <tr>
                    <td>Kucing pemenang kompetisi</td>
                    <td>Meowfers</td>
                    <td><button class="hapus" data-type="post" data-id="1">Hapus</button></td>
                </tr>
            </tbody>
        </table>
</section>

<!-- Tambahkan Berita -->
<section id="tambahkan-berita">
    <h2>Tambahkan Berita</h2>
    <input type="text" id="judul-berita" placeholder="Judul berita" />
    <input type="url" id="link-berita" placeholder="Link Berita" />
    <br />
    <button class="upload" id="upload-berita">Upload</button>
</section>

<!-- Laporan Donasi -->
<section id="laporan-donasi">
    <h2>Laporan Donasi</h2>
    <table>
        <thead>
        <tr>
            <th>Username</th>
            <th>Jumlah Donasi</th>
        </tr>
        </thead>
        <tbody id="donasi-tbody">
        <tr>
            <td>Peony21</td>
            <td>Rp250.000</td>
        </tr>
        <tr>
            <td>Meowfers</td>
            <td>Rp100.000</td>
        </tr>
        </tbody>
    </table>
</section>

<!-- Manajemen Pengguna -->
<section id="manajemen-pengguna">
    <h2>Manajemen Pengguna</h2>
    <table>
        <thead>
        <tr>
            <th>Username</th>
            <th>Status akun</th>
            <th>Aksi</th>
        </tr>
        </thead>
        <tbody id="pengguna-tbody">
        <tr data-username="milesAway" data-status="Aktif">
            <td>milesAway</td>
            <td class="status-akun">Aktif</td>
            <td>
            <button class="hapus" data-type="user" data-username="milesAway">Hapus</button>
            <button class="blokir" data-username="milesAway">Blokir</button>
            </td>
        </tr>
        <tr data-username="Roseroy" data-status="Diblokir">
            <td>Roseroy</td>
            <td class="status-akun">Diblokir</td>
            <td>
            <button class="hapus" data-type="user" data-username="Roseroy">Hapus</button>
            <button class="blokir" data-username="Roseroy">Blokir</button>
            </td>
        </tr>
        </tbody>
    </table>
</section>

<script>
  // Data arrays to simulate data storage
    let postings = [
        { title: "Kucing anggora bersantai", username: "Peony21" },
        { title: "Kucing pemenang kompetisi", username: "Meowfers" }
    ];

    let berita = []; // Will hold added news {title, link}

    let donasi = [
        { username: "Peony21", jumlah: 250000 },
        { username: "Meowfers", jumlah: 100000 }
    ];

    let users = [
        { username: "milesAway", status: "Aktif" },
        { username: "Roseroy", status: "Diblokir" }
    ];

    // Helper function to format currency (Rp)
    function formatRp(angka) {
        return "Rp" + angka.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
    }

    // HANDLE HAPUS POSTINGAN & PENGGUNA
    document.body.addEventListener("click", function (e) {
        if (e.target.matches("button.hapus")) {
        const type = e.target.getAttribute("data-type");
        if (type === "post") {
            // Hapus postingan berdasarkan data-id
            const id = Number(e.target.getAttribute("data-id"));
            if (id >= 0 && id < postings.length) {
            postings.splice(id, 1);
            renderPostings();
            alert("Postingan berhasil dihapus.");
            }
        } else if (type === "user") {
            const username = e.target.getAttribute("data-username");
            const idx = users.findIndex(u => u.username === username);
            if (idx !== -1) {
            if (confirm(`Apakah Anda yakin menghapus pengguna "${username}"?`)) {
                users.splice(idx, 1);
                // Juga hapus posting yang dibuat user ini
                postings = postings.filter(p => p.username !== username);
                renderUsers();
                renderPostings();
                alert(`Pengguna "${username}" berhasil dihapus.`);
            }
            }
        }
        } else if (e.target.matches("button.blokir")) {
        const username = e.target.getAttribute("data-username");
        const user = users.find(u => u.username === username);
        if (user) {
            if (user.status === "Aktif") {
            if (confirm(`Apakah Anda ingin memblokir pengguna "${username}"?`)) {
                user.status = "Diblokir";
                alert(`Pengguna "${username}" telah diblokir.`);
            }
            } else {
            if (confirm(`Apakah Anda ingin mengaktifkan kembali pengguna "${username}"?`)) {
                user.status = "Aktif";
                alert(`Pengguna "${username}" telah diaktifkan kembali.`);
            }
            }
            renderUsers();
        }
        }
    });

    // RENDER FUNCTION POSTING
    function renderPostings() {
        const tbody = document.getElementById("posting-tbody");
        tbody.innerHTML = "";
        postings.forEach((p, idx) => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
            <td>${p.title}</td>
            <td>${p.username}</td>
            <td><button class="hapus" data-type="post" data-id="${idx}">Hapus</button></td>
        `;
        tbody.appendChild(tr);
        });
    }

    // RENDER FUNCTION USERS
    function renderUsers() {
        const tbody = document.getElementById("pengguna-tbody");
        tbody.innerHTML = "";
        users.forEach(user => {
        const tr = document.createElement("tr");
        tr.setAttribute("data-username", user.username);
        tr.setAttribute("data-status", user.status);
        tr.innerHTML = `
            <td>${user.username}</td>
            <td class="status-akun">${user.status}</td>
            <td>
            <button class="hapus" data-type="user" data-username="${user.username}">Hapus</button>
            <button class="blokir" data-username="${user.username}">${user.status === "Aktif" ? "Blokir" : "Aktifkan"}</button>
            </td>
        `;
        tbody.appendChild(tr);
        });
    }

    // Render donasi laporan
    function renderDonasi() {
        const tbody = document.getElementById("donasi-tbody");
        tbody.innerHTML = "";
        donasi.forEach(d => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
            <td>${d.username}</td>
            <td>${formatRp(d.jumlah)}</td>
        `;
        tbody.appendChild(tr);
        });
    }

    // Tambah berita handler
    document.getElementById("upload-berita").addEventListener("click", function () {
        const judul = document.getElementById("judul-berita").value.trim();
        const link = document.getElementById("link-berita").value.trim();

        if (!judul) {
        alert("Judul berita tidak boleh kosong.");
        return;
        }
        if (!link) {
        alert("Link berita tidak boleh kosong.");
        return;
        }
        // Simple URL validation
        try {
        new URL(link);
        } catch(e) {
        alert("Link berita tidak valid.");
        return;
        }

        berita.push({ title: judul, url: link });
        alert("Berita berhasil diupload.");

        // Clear input fields
        document.getElementById("judul-berita").value = "";
        document.getElementById("link-berita").value = "";
    });

    // Inisialisasi render tabel
    renderPostings();
    renderUsers();
    renderDonasi();
</script>

</body>
</html>
